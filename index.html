<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Financial Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .dashboard-card {
            background-color: white;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #e5e7eb;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #9ca3af;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-7xl mx-auto space-y-8">

        <!-- Header and Introduction -->
        <header class="text-center">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-2">AI Financial Dashboard</h1>
            <p class="text-lg text-gray-600">Analyze your spending, track goals, and manage your budget with predictive insights.</p>
        </header>

        <!-- Main Dashboard Grid -->
        <main class="grid grid-cols-1 lg:grid-cols-3 gap-6">

            <!-- Expense Input and Categorization -->
            <div class="dashboard-card lg:col-span-1 h-fit">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4">Add New Expense</h2>
                <form id="expenseForm" class="space-y-4">
                    <div>
                        <label for="description" class="block text-sm font-medium text-gray-700">Description</label>
                        <input type="text" id="description" name="description" placeholder="e.g., Coffee at Starbucks" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2">
                    </div>
                    <div>
                        <label for="amount" class="block text-sm font-medium text-gray-700">Amount ($)</label>
                        <input type="number" id="amount" name="amount" placeholder="e.g., 4.50" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2">
                    </div>
                    <button type="submit" class="w-full bg-indigo-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out">
                        Add Expense
                    </button>
                </form>

                <h3 class="text-lg font-semibold text-gray-800 mt-6 mb-2">Recent Expenses</h3>
                <ul id="expenseList" class="space-y-2 max-h-64 overflow-y-auto">
                    <!-- Expenses will be populated here by JavaScript -->
                    <li id="no-expenses" class="text-gray-500 text-sm italic">No expenses added yet.</li>
                </ul>
            </div>

            <!-- Predictive Analytics and Budget Alerts -->
            <div class="dashboard-card lg:col-span-2">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-2xl font-semibold text-gray-800">Predictive Spending Dashboard</h2>
                    <div id="budgetAlert" class="hidden px-3 py-1 bg-yellow-100 text-yellow-800 text-sm font-medium rounded-full">
                        Budget Alert!
                    </div>
                </div>
                <div class="bg-gray-50 rounded-lg p-4 mb-6">
                    <canvas id="spendingChart"></canvas>
                </div>
                <div class="flex flex-col md:flex-row gap-6">
                    <!-- Current Spending Overview -->
                    <div class="bg-gray-100 p-4 rounded-lg flex-1">
                        <h3 class="text-lg font-semibold text-gray-700 mb-2">Current Spending</h3>
                        <p class="text-4xl font-bold text-gray-900" id="currentSpending">$0.00</p>
                        <p class="text-sm text-gray-500 mt-1">Total expenses this period</p>
                    </div>
                    <!-- Predicted Spending Overview -->
                    <div class="bg-gray-100 p-4 rounded-lg flex-1">
                        <h3 class="text-lg font-semibold text-gray-700 mb-2">Predicted Spending</h3>
                        <p class="text-4xl font-bold text-gray-900" id="predictedSpending">$0.00</p>
                        <p class="text-sm text-gray-500 mt-1">Projected total by month-end</p>
                    </div>
                </div>
            </div>

            <!-- Financial Goal Tracker -->
            <div class="dashboard-card lg:col-span-3">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4">Financial Goal Tracker</h2>
                <div id="goalList" class="space-y-4">
                    <!-- Goals will be populated here by JavaScript -->
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- Configuration and State ---
            const BUDGET = 1000; // Monthly budget limit
            const goals = [
                { name: "Emergency Fund", target: 2000, current: 0 },
                { name: "New Laptop", target: 1500, current: 0 },
                { name: "Vacation Fund", target: 3000, current: 0 }
            ];
            let expenses = JSON.parse(localStorage.getItem('expenses')) || [];
            
            let spendingChart;

            // --- UI Elements ---
            const expenseForm = document.getElementById('expenseForm');
            const expenseList = document.getElementById('expenseList');
            const currentSpendingEl = document.getElementById('currentSpending');
            const predictedSpendingEl = document.getElementById('predictedSpending');
            const budgetAlertEl = document.getElementById('budgetAlert');
            const goalListEl = document.getElementById('goalList');

            // --- Core Functions ---

            /**
             * "AI" logic for expense categorization based on keywords.
             * A more advanced tool would use machine learning models for this.
             */
            function categorizeExpense(description) {
                const lowerDesc = description.toLowerCase();
                if (lowerDesc.includes('coffee') || lowerDesc.includes('restaurant') || lowerDesc.includes('groceries') || lowerDesc.includes('food')) {
                    return 'Food & Dining';
                }
                if (lowerDesc.includes('uber') || lowerDesc.includes('gas') || lowerDesc.includes('bus') || lowerDesc.includes('transport')) {
                    return 'Transportation';
                }
                if (lowerDesc.includes('netflix') || lowerDesc.includes('spotify') || lowerDesc.includes('movie')) {
                    return 'Entertainment';
                }
                if (lowerDesc.includes('salary') || lowerDesc.includes('income') || lowerDesc.includes('freelance')) {
                    return 'Income';
                }
                if (lowerDesc.includes('rent') || lowerDesc.includes('mortgage') || lowerDesc.includes('housing')) {
                    return 'Housing';
                }
                if (lowerDesc.includes('doctor') || lowerDesc.includes('pharmacy') || lowerDesc.includes('hospital')) {
                    return 'Healthcare';
                }
                return 'Miscellaneous';
            }

            /**
             * Updates the expense list UI.
             */
            function renderExpenses() {
                expenseList.innerHTML = '';
                if (expenses.length === 0) {
                    expenseList.innerHTML = '<li id="no-expenses" class="text-gray-500 text-sm italic">No expenses added yet.</li>';
                    return;
                }
                expenses.forEach(exp => {
                    const listItem = document.createElement('li');
                    listItem.className = 'bg-gray-50 p-3 rounded-md border border-gray-200 shadow-sm';
                    listItem.innerHTML = `
                        <div class="flex justify-between items-center">
                            <span class="font-medium text-gray-800">${exp.description}</span>
                            <span class="text-sm font-semibold text-gray-900">$${exp.amount.toFixed(2)}</span>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">Category: ${exp.category}</p>
                    `;
                    expenseList.prepend(listItem);
                });
            }

            /**
             * Calculates and displays the total and predicted spending.
             */
            function updateSpendingData() {
                const totalSpending = expenses.reduce((sum, exp) => sum + exp.amount, 0);
                const today = new Date().getDate();
                const daysInMonth = new Date(new Date().getFullYear(), new Date().getMonth() + 1, 0).getDate();
                
                const averageDailySpend = totalSpending / today;
                const predictedSpending = averageDailySpend * daysInMonth;

                currentSpendingEl.textContent = `$${totalSpending.toFixed(2)}`;
                predictedSpendingEl.textContent = `$${predictedSpending.toFixed(2)}`;

                // Update budget alert
                if (totalSpending >= BUDGET) {
                    budgetAlertEl.classList.remove('hidden');
                } else {
                    budgetAlertEl.classList.add('hidden');
                }

                updateChart(totalSpending, predictedSpending);
            }

            /**
             * Renders and updates the spending chart.
             */
            function updateChart(totalSpending, predictedSpending) {
                const ctx = document.getElementById('spendingChart').getContext('2d');
                const labels = ['Current Spending', 'Budget', 'Predicted Spending'];
                const data = [totalSpending, BUDGET, predictedSpending];
                const chartColors = [
                    'rgba(79, 70, 229, 0.8)', // Indigo for Current Spending
                    'rgba(245, 158, 11, 0.8)', // Yellow for Budget
                    'rgba(16, 185, 129, 0.8)' // Green for Predicted
                ];

                if (spendingChart) {
                    spendingChart.destroy();
                }

                spendingChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Amount ($)',
                            data: data,
                            backgroundColor: chartColors,
                            borderColor: chartColors.map(color => color.replace('0.8', '1')),
                            borderWidth: 1,
                            borderRadius: 8,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.dataset.label}: $${context.parsed.y.toFixed(2)}`;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    display: false
                                },
                                ticks: {
                                    callback: function(value) {
                                        return '$' + value;
                                    }
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                }
                            }
                        }
                    }
                });
            }

            /**
             * Renders financial goals with progress bars.
             */
            function renderGoals() {
                goalListEl.innerHTML = '';
                goals.forEach(goal => {
                    const progress = Math.min((goal.current / goal.target) * 100, 100).toFixed(0);
                    const goalElement = document.createElement('div');
                    goalElement.className = 'dashboard-card';
                    goalElement.innerHTML = `
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-lg font-medium text-gray-800">${goal.name}</span>
                            <span class="text-sm font-semibold text-gray-600">$${goal.current.toFixed(2)} / $${goal.target.toFixed(2)}</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2.5">
                            <div class="bg-indigo-600 h-2.5 rounded-full" style="width: ${progress}%;"></div>
                        </div>
                        <p class="text-sm text-gray-500 mt-2">${progress}% complete</p>
                    `;
                    goalListEl.appendChild(goalElement);
                });
            }

            // --- Event Handlers ---
            expenseForm.addEventListener('submit', (e) => {
                e.preventDefault();

                const description = document.getElementById('description').value;
                const amount = parseFloat(document.getElementById('amount').value);

                if (isNaN(amount) || amount <= 0) {
                    return; // Basic validation
                }

                const category = categorizeExpense(description);
                const newExpense = { description, amount, category, date: new Date().toISOString() };
                expenses.push(newExpense);
                localStorage.setItem('expenses', JSON.stringify(expenses));
                
                // For simplicity, let's assume all expenses contribute to the first goal.
                if (goals.length > 0) {
                    goals[0].current += amount;
                }

                // Update UI
                renderExpenses();
                updateSpendingData();
                renderGoals();
                
                // Reset form
                expenseForm.reset();
            });

            // --- Initial Render ---
            renderExpenses();
            updateSpendingData();
            renderGoals();
        });
    </script>
</body>
</html>
